!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(){$("#notificationArea").html("");var e="";e+='<div class="jumbotron">',e+=" <h1>Register for Your Project Now</h1>",e+="<p>",e+="Registration will close at the end of the first week of the term.",e+="</p>",e+="</div>",$("#notificationArea").append(e)}function a(){b.isSignedIn()?($("#navAccount").show(),$("#navSignin").hide(),$("#welcomeName").html(b.getProfile().getGivenName()),$("#welcome").removeClass("hidden"),h=b.getProfile().getEmail(),gapi.client.happiness.getTeachingTerm({id:g}).execute(function(e){e.code?(console.log(e.message),v=!1):e.joinable===!0?(v=!0,o()):v=!1,r(v)}),vex.defaultOptions.className="vex-theme-os"):$("#navAccount").hide()}function r(e){$("#projects").html(""),gapi.client.happiness.listProject({teachingTerm:g}).execute(function(t){if(t.code)console.log(t.code);else{t.items=t.items||[];for(var n=0;n<t.items.length;n++){var i=t.items[n].id,o=t.items[n].name,a=t.items[n].description;c(i,o,a,e)}}})}function c(e,t,n,i){var o='<div class="col-lg-6 ">';o+='<div style="text-align:center;">',o+='<div class="panel panel-default projectDesc ">';var a=$.inArray(e.toString(),b.getJoinedProjects());o+=a!=-1?'<div class="panel-heading joinedProject"> Project: '+t+"</div>":'<div class="panel-heading"> Project: '+t+"</div>",o+='<div class="panel-body">',o+=n,o+="<br/><br/>",i&&a==-1&&(o+='<span  style="padding-right:5px;">',o+='<button class="btn btn-default btn-lg" type="button" onclick="joinProject('+e+')">Join</button>',o+="</span>"),o+='<a href="project-dashboard.html?'+e+","+h+'" style="padding-left:5px;">',o+='<button class="btn btn-default btn-lg" type="button" >Happiness</button>',o+="</a>",o+="</div>",o+="</div>",o+="</div>",o+="</div>",$("#projects").append(o)}function s(e){gapi.client.happiness.joinProject({id:e}).execute(function(t){t.code||(window.location="project-dashboard.html?"+e+","+h)})}function l(e){vex.dialog.open({message:"We need some information before you can join",input:'<input name="givenName" type="text" placeholder="Given Name" required />\n<input name="surName" type="text" placeholder="Surname" required />\n<input name="email" type="text" placeholder="Email" required />',buttons:[$.extend({},vex.dialog.buttons.YES,{text:"Submit"}),$.extend({},vex.dialog.buttons.NO,{text:"Cancel"})],callback:function(t){if(t===!1)return console.log("Cancelled");var n=(t.givenName,t.surName,t.email,{});n.givenName=t.givenName,n.surName=t.surName,n.email=t.email,gapi.client.happiness.insertUser(n).execute(function(t){t.code||s(e)})}})}var u=n(1),d=i(u),p=n(2),f=(i(p),n(3)),m=i(f);(0,m["default"])("https://apis.google.com/js/client.js?onload=loadPlatform","client"),window.loadPlatform=function(){(0,m["default"])("https://apis.google.com/js/platform.js?onload=init","google-api")};var g,h,v,b;window.init=function(){$("#navAccount").hide();var e=window.location.search;"?"==e.substring(0,1)&&(e=e.substring(1));for(var t=e.split(","),n=0;n<t.length;n++)t[n]=unescape(t[n]);g=t[0],""==g&&(g="5736907271045120"),h=t[1],(0,d["default"])(a).then(function(e){b=e}),document.getElementById("navBtnSigninGoogle").onclick=function(){b.changeAccount()}},window.joinProject=function(e){gapi.client.happiness.getCurrentUser().execute(function(t){t.code?l(e):s(e)})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=new Promise(function(t,n){var i,o,a=function(){0==--o&&(i=ReactDOM.render(React.createElement(r["default"],{client_id:s,scopes:c,callback:e}),document.getElementById("accountView")),t(i))};o=2,gapi.client.load("happiness","v2",a,"https://2-dot-uni1-happy.appspot.com/_ah/api"),gapi.load("auth2",a)});return t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(2),r=i(a),c="https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",s="728995435943-2qqb570ukek75pvmv3i813ohecvr5rrh.apps.googleusercontent.com"},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){function t(e){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.setType=o.setType.bind(o),o.getJoinedProjects=o.getJoinedProjects.bind(o),o.state={name:"",email:"",picSrc:"",type:""},o.auth2=gapi.auth2.init({client_id:o.props.client_id,scope:o.props.scope}),o.signin(),o}return o(t,e),a(t,[{key:"signin",value:function(){var e=this;this.auth2.currentUser.listen(function(t){t.isSignedIn()&&(e.setUser(e.getProfile()),e.setType(),e.props.callback())})}},{key:"changeAccount",value:function(e){this.auth2.signIn({prompt:"select_account"}).then(e)}},{key:"getProfile",value:function(){return this.auth2.currentUser.get().getBasicProfile()}},{key:"isSignedIn",value:function(){return this.auth2.isSignedIn.get()}},{key:"getCurrentUser",value:function(){var e=new Promise(function(e,t){gapi.client.happiness.getCurrentUser().execute(function(n){n.code?t(n):e(n)})});return e}},{key:"isProjectOwner",value:function(e,t){var n=!1;return"undefined"!=typeof e.projects&&e.projects.forEach(function(e){e===t&&(n=!0)}),n}},{key:"getJoinedProjects",value:function(){return this.state.joinedProject}},{key:"registerCurrentUser",value:function(e,t,n){var i=new Promise(function(i,o){var a={};a.email=n,a.givenName=e,a.surName=t,gapi.client.qdacity.insertUser(a).execute(function(e){e.code?o(e):i(e)})});return i}},{key:"setType",value:function(){var e=this;this.getCurrentUser().then(function(t){e.setState({type:t.type,joinedProject:t.projects})})}},{key:"setUser",value:function(e){this.setState({name:e.getName(),email:e.getEmail(),picSrc:e.getImageUrl()})}},{key:"signout",value:function(){window.open("https://accounts.google.com/logout")}},{key:"renderAdminBtn",value:function(){return"ADMIN"==this.state.type?React.createElement("a",{href:"admin.html",className:"btn btn-danger btn-sm active"},"Admin"):""}},{key:"render",value:function(){return React.createElement("div",null,React.createElement("div",{className:"navbar-content"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-5"},React.createElement("img",{id:"currentUserPicture",src:this.state.picSrc,alt:"",className:"img-responsive"}),React.createElement("p",{className:"text-center small"})),React.createElement("div",{"class":"col-xs-7"},React.createElement("span",{id:"currentUserName"},this.state.name),React.createElement("p",{id:"currentUserEmail",className:"text-muted small"},this.state.email),React.createElement("div",{"class":"divider"}),this.renderAdminBtn()))),React.createElement("div",{className:"navbar-footer"},React.createElement("div",{className:"navbar-footer-content"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-6"},React.createElement("a",{id:"navBtnSwitchAccount",href:"#",className:"btn btn-default btn-sm",onClick:this.changeAccount.bind(this)},"Switch User")),React.createElement("div",{className:"col-xs-6"},React.createElement("a",{id:"navBtnSignOut",className:"btn btn-default btn-sm pull-right",onClick:this.signout.bind(this)},"Sign Out"))))))}}]),t}(React.Component);t["default"]=r},function(e,t,n){var i,o;!function(a,r){"undefined"!=typeof e&&e.exports?e.exports=r():(i=r,o="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==o&&(e.exports=o)))}("$script",function(){function e(e,t){for(var n=0,i=e.length;n<i;++n)if(!t(e[n]))return s;return 1}function t(t,n){e(t,function(e){return!n(e)})}function n(a,r,c){function s(e){return e.call?e():p[e]}function u(){if(!--b){p[v]=1,h&&h();for(var n in m)e(n.split("|"),s)&&!t(m[n],s)&&(m[n]=[])}}a=a[l]?a:[a];var d=r&&r.call,h=d?r:c,v=d?a.join(""):r,b=a.length;return setTimeout(function(){t(a,function e(t,n){return null===t?u():(n||/^https?:\/\//.test(t)||!o||(t=t.indexOf(".js")===-1?o+t+".js":o+t),g[t]?(v&&(f[v]=1),2==g[t]?u():setTimeout(function(){e(t,!0)},0)):(g[t]=1,v&&(f[v]=1),void i(t,u)))})},0),n}function i(e,t){var n,i=r.createElement("script");i.onload=i.onerror=i[d]=function(){i[u]&&!/^c|loade/.test(i[u])||n||(i.onload=i[d]=null,n=1,g[e]=2,t())},i.async=1,i.src=a?e+(e.indexOf("?")===-1?"?":"&")+a:e,c.insertBefore(i,c.lastChild)}var o,a,r=document,c=r.getElementsByTagName("head")[0],s=!1,l="push",u="readyState",d="onreadystatechange",p={},f={},m={},g={};return n.get=i,n.order=function(e,t,i){!function o(a){a=e.shift(),e.length?n(a,o):n(a,t,i)}()},n.path=function(e){o=e},n.urlArgs=function(e){a=e},n.ready=function(i,o,a){i=i[l]?i:[i];var r=[];return!t(i,function(e){p[e]||r[l](e)})&&e(i,function(e){return p[e]})?o():!function(e){m[e]=m[e]||[],m[e][l](o),a&&a(r)}(i.join("|")),n},n.done=function(e){n([null],e)},n})}]);